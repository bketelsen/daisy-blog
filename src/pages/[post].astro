---
import Blog from "@layouts/blog";
import Date from "@components/utilities/Date";
import { published, getRSS } from "@data/post"

export async function getStaticPaths({ rss }) {
  const markdownFiles = await Astro.glob('../content/**/*.md');
  const posts = published(markdownFiles);

  rss(getRSS(markdownFiles));

  return posts.map((post) => {
    return {
      params: { post: post.slug },
      props: { post }
    };
  })
}

// Destructure to get both `Astro.props.post` and `Astro.props.post.Content`
const { post: { Content }, post } = Astro.props;
---

<Blog waves={true} title={post.title} desc={post.desc} img={post.img ? post.img : null}>
  <section class="py-16 bg-white md:py-24"
    style="background-image: url('flex-ui-assets/elements/pattern-white.svg'); background-position: center top;">
    <div class="container px-4 mx-auto">
      <div class="mx-auto mb-12 text-center md:max-w-2xl">
        <div class="flex items-center justify-center">
          <p class="inline-block font-medium text-blue-500">{post.author}</p>
          <span class="mx-1 text-blue-500">â€¢</span>
          <p class="inline-block font-medium text-blue-500">
            <Date date={post.date} />
          </p>
        </div>
        <h2 class="mb-4 text-3xl font-bold leading-tight tracking-tighter font-title md:text-5xl text-darkCoolGray-900">
          {post.title}</h2>
        <p class="mb-6 text-lg font-medium md:text-xl text-coolGray-500">Lorem ipsum dolor sit amet, consectetur
          adipiscing elit.</p>
        <div
          class="inline-block px-3 py-1 text-xs font-medium leading-5 text-blue-500 uppercase bg-blue-100 rounded-full shadow-sm">
          Technology</div>
      </div>
      <div class="mx-auto mb-10 overflow-hidden rounded-lg max-w-max">
        {post.img && post.imgWidth && post.imgHeight ?
        <figure class="flex justify-center">
          <img src={post.img} alt={post.title} width={post.imgWidth} height={post.imgHeight}
            class="rounded bg-base-200" />
        </figure>
        : post.img &&
        <figure class="flex justify-center">
          <img src={post.img} alt={post.title} class="rounded bg-base-200" />
        </figure>
        }
      </div>
      <div class="mx-auto md:max-w-3xl">
        <p class="pb-10 mb-8 text-lg font-medium border-b md:text-xl text-coolGray-500 border-coolGray-100">{post.desc}
        </p>
        <div class="prose prose-lg">
          <Content />
        </div>
      </div>
    </div>
  </section>
</Blog>
