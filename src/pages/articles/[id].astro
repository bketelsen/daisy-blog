---
import Blog from "@layouts/blog";
import { getProfile, getImage } from "../../data/blox.js";
import { Picture } from "astro-imagetools/components";


export async function getStaticPaths() {
  const markdownFiles = await Astro.glob('../../content/articles/*.md');

  return markdownFiles.map((article) => {
    const id = article.file.split('/').reverse()[0].replace('.md', '');
    return {
      params: { id: id },
      props: { article }
    };
  })
}


const { article: { Content }, article } = Astro.props;
const prof = getProfile(article.frontmatter.profile);
const image = getImage(article.frontmatter.image);
---

<Blog title="Blog">
  <section class="py-16 bg-white md:py-24"
    style="background-image: url('/flex-ui-assets/elements/pattern-white.svg'); background-position: center top;">
    <div class="container px-4 mx-auto">
      <div class="mx-auto mb-12 text-center md:max-w-2xl">
        <div class="flex items-center justify-center">
          <p class="inline-block font-medium text-blue-700">{prof.first_name}</p>
          <span class="mx-1 text-blue-500">â€¢</span>
          <p class="inline-block font-medium text-blue-700">
          </p>
        </div>
        <h2 class="mb-4 text-4xl font-bold leading-tight tracking-tighter md:text-5xl text-darkCoolGray-900">
          {article.frontmatter.title}</h2>
        <p class="mb-6 text-lg font-medium md:text-xl text-coolGray-500">Lorem ipsum dolor sit amet, consectetur
          adipiscing elit.</p>
        <div
          class="inline-block px-3 py-1 text-xs font-medium leading-5 text-blue-700 uppercase bg-blue-100 rounded-full shadow-sm">
        </div>
      </div>
      <div class="max-w-4xl mx-auto mb-10 overflow-hidden rounded-lg">
        <figure class="flex justify-center">
          <Picture
            src={'/src/content/static/' + image.file_name}
            alt={article.frontmatter.title}
            sizes="(min-width: 1024px) 1024px, 100vw"
            />
        </figure>
      </div>
      <div class="mx-auto md:max-w-3xl">
        <p class="pb-10 mb-8 text-lg font-medium border-b md:text-xl text-coolGray-500 border-coolGray-100">
          {article.frontmatter.excerpt}
        </p>
        <div class="prose prose-xl">
          <Content />
        </div>
      </div>
    </div>
  </section>
</Blog>
